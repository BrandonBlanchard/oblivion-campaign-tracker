(this.webpackJsonpoblivion=this.webpackJsonpoblivion||[]).push([[0],{136:function(e,t,n){},247:function(e,t,n){},248:function(e,t,n){},266:function(e,t,n){},269:function(e,t,n){},270:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(16),c=n.n(i),o=n(10),l=n(19),s=n.n(l),u=n(29),d=n(13),m=n.n(d),f=(n(136),n(23)),p=n(5),h=n(11),E=n(95),y=n.n(E),v="Guardian",g="Corruptor",k="both",w=[[{id:0,tier:0,win:[1],loss:[1],order:0,alliance:k,name:"Doomed Patrol",summary:"page #"},{id:1,tier:0,win:[2],loss:[2],order:1,alliance:k,name:"Rising Tensions",summary:"page #"},{id:2,tier:0,win:[3,4],loss:[3,4],order:2,alliance:k,name:"Border War",summary:"page #"}],[{id:3,tier:1,win:[5],loss:[6],order:0,alliance:v,name:"A War for Peace",summary:"page #"},{id:4,tier:1,win:[10],loss:[11],order:1,alliance:g,name:"Fueling the fire",summary:"page #"}],[{id:5,tier:2,win:[8],loss:[9],order:0,alliance:v,name:"Seeds of Hope",summary:"page #"},{id:6,tier:2,win:[9],loss:[7],order:1,alliance:v,name:"The Sanguine Trail",summary:"page #"},{id:10,tier:2,win:[12],loss:[13],order:1,alliance:g,name:"Reckless Assault",summary:"page #"},{id:11,tier:2,win:[13],loss:[14],order:0,alliance:g,name:"Burial at Sea",summary:"page #"}],[{id:7,tier:3,win:[666],loss:[666],order:2,alliance:v,name:"Dark Days",summary:"page #"},{id:8,tier:3,win:[666],loss:[666],order:0,alliance:v,name:"Toward the light",summary:"page #"},{id:9,tier:3,win:[666],loss:[666],order:1,alliance:v,name:"Left Behind",summary:"page #"},{id:12,tier:3,win:[666],loss:[666],order:2,alliance:g,name:"The End is Nigh",summary:"page #"},{id:13,tier:3,win:[666],loss:[666],order:1,alliance:g,name:"Clouded Visions",summary:"page #"},{id:14,tier:3,win:[666],loss:[666],order:0,alliance:g,name:"The Last Ride",summary:"page #"}],[{id:666,tier:4,win:[],loss:[],order:0,alliance:k,name:"Gateway to Oblivion",summary:"page 666"}]],b=w.reduce((function(e,t){return[].concat(Object(h.a)(e),Object(h.a)(t))})),x=y()(b,(function(e){return e.id})),O=function(e){var t=e.width,n=e.height,r=n/10,i=t/2,c=n/2;return a.a.createElement(a.a.Fragment,null,a.a.createElement(p.Layer,{name:"background-layer"},a.a.createElement(p.Circle,{x:i,y:r,radius:r,stroke:"#662423",strokeWidth:1}),a.a.createElement(p.Circle,{x:i,y:3*r,radius:r,stroke:"#662423",strokeWidth:1}),a.a.createElement(p.Circle,{x:i,y:5*r,radius:r,stroke:"#662423",strokeWidth:1}),a.a.createElement(p.Circle,{x:i,y:7*r,radius:r,stroke:"#662423",strokeWidth:1}),a.a.createElement(p.Circle,{x:i,y:9*r,radius:r,stroke:"#662423",strokeWidth:1}),a.a.createElement(p.RegularPolygon,{x:i,y:5*r,sides:3,radius:r,stroke:"#662423",strokeWidth:1,rotation:180}),a.a.createElement(p.Line,{points:[i,4.5*r,i,3.5*r],stroke:"#662423"}),a.a.createElement(p.Circle,{x:i,y:3.5*r,radius:10,stroke:"#662423",strokeWidth:1,fill:"#000"})),a.a.createElement(p.Layer,null,a.a.createElement(p.Circle,{x:i,y:c,radius:2*r,stroke:"#343434",strokeWidth:1}),a.a.createElement(p.Circle,{x:i,y:c-r/2,radius:3.5*r,stroke:"#343434",strokeWidth:1}),a.a.createElement(p.Circle,{x:i,y:-2*r,radius:6*r,stroke:"#343434",strokeWidth:1}),a.a.createElement(p.Circle,{x:i,y:12*r,radius:6*r,stroke:"#343434",strokeWidth:1}),a.a.createElement(p.RegularPolygon,{sides:4,radius:r,x:i,y:6*r,stroke:"#343434"})))},j=function(e){return{type:"SET_PLAYERS",players:e}},_=function(e){var t=e.id,n=e.tier,i=e.name,c=e.x,o=e.y,l=e.radius,s=e.dispatch,u=l-.5*l,d=l/16,m={x:-l,y:.8*-l};return Object(r.useEffect)((function(){s(function(e,t,n){return{type:"SET_NODE",id:e,x:t,y:n}}(t,c,o))}),[c,o,t]),a.a.createElement(p.Group,{x:c,y:o},a.a.createElement(p.Circle,{x:0,y:0,radius:l,stroke:"#fff",strokeWidth:1.5,fill:"#000"}),a.a.createElement(p.Text,{x:m.x,y:m.y,width:2*l,padding:8,text:i,align:"center",fill:"#fff",fontSize:.32*l,fontFamily:"Times New Roman"}),function(e,t,n,r){for(var i=2*r,c=[],o=t-(i+2)*(e-1)/2,l=0;l<e;l+=1){var s=o+l*(i+2);c.push(a.a.createElement(p.RegularPolygon,{key:"".concat(s,"-").concat(n),x:s,y:n,radius:r,sides:4,stroke:"#fff",fill:"#fff",strokeWidth:1}))}return c}(n,0,u,d))},W=function(e){var t=e.x,n=e.y,r=e.radius,i=e.nodes,c=e.dispatch;return i.map((function(e,i){var o=e.name,l=e.id,s=(e.summary,e.tier);return a.a.createElement(_,{key:l,id:l,x:t+0,y:2*(n+1.28*r)*i+r,radius:r,tier:s+1,name:o,dispatch:c})}))},L=n(96),S=n.n(L),C=function(e){var t=e.x,n=e.y,r=(e.tier,e.radius),i=e.nodes,c=e.width,o=e.height,l=e.dispatch,s=S()(i,["alliance","order"]),u=c/2,d=[t+-u,n+o/2],m=[t+u,n+o/2],f=i.length<2?2*r:r;return s.map((function(e,t,n){return function(e,t,n,r,i,c,o){var l=o.length>1?(c+1)/(o.length+1):.5,s=Math.min(e[0],t[0]),u=Math.max(e[0],t[0]),d=Math.min(e[1],e[1]),m=(u-s)*l+s,f=(Math.min(t[1],e[1])-d)*l+d;return a.a.createElement(_,{key:r.id,id:r.id,x:m,y:f,node:r.tier,name:r.name,radius:n,tier:r.tier+1,dispatch:i})}(m,d,f,e,l,t,n)}))},P=function e(t,n,r,a){var i=1===t[a]?"win":"loss",c=a+1;if(a>=t.length)return null;var o=function(e,t,n){return m()(e,[t]).reduce((function(e,t){var r=x[t];return r.alliance===n||r.alliance===k?r:e}),null)}(r,i,n);if(null===o)return null;var l=e(t,n,o,c);return null!==l?[o].concat(Object(h.a)(l)):[o]},T=function(e){var t=e.nodePositionsMap,n=e.player,r=n.alliance,i=n.outcomes,c=r===v?"#ffd700":"#CC4441",o=w[0].filter((function(e){return 0===e.id}))[0],l=P(i,r,o,0);if(null===l)return a.a.createElement(a.a.Fragment,null);var s=[o].concat(Object(h.a)(l)).reduce((function(e,n){return function(e,t,n){var r=m()(n,[t.id],null);if(!r)return e;var a=r.x,i=r.y;return e.push(a),e.push(i),e}(e,n,t)}),[]);return a.a.createElement(a.a.Fragment,null,a.a.createElement(p.Line,{points:s,stroke:"#000",strokeWidth:8}),a.a.createElement(p.Line,{points:s,stroke:c,strokeWidth:2}))},D=function(e){var t=e.x,n=e.y,r=e.outcome,i=e.alliance,c=i===v?"#ffd700":"#CC4441",o=i===v?"#CC4441":"#ffd700";return a.a.createElement(p.Group,{x:t,y:n},1===r?function(e){var t=[-6,2],n=[0,10],r=[14,-10];return a.a.createElement(a.a.Fragment,null,a.a.createElement(p.Line,{points:[].concat(t,n,r),stroke:"#000",strokeWidth:9}),a.a.createElement(p.Line,{points:[].concat(t,n,r),stroke:e,strokeWidth:5}))}(c):function(e){var t=[-10,-10],n=[10,-10],r=[-10,10],i=[10,10];return a.a.createElement(a.a.Fragment,null,a.a.createElement(p.Line,{points:[].concat(t,i),stroke:"#000",strokeWidth:9}),a.a.createElement(p.Line,{points:[].concat(n,r),stroke:"#000",strokeWidth:9}),a.a.createElement(p.Line,{points:[].concat(t,i),stroke:e,strokeWidth:6}),a.a.createElement(p.Line,{points:[].concat(n,r),stroke:e,strokeWidth:6}))}(o))},N=function(e){return e.playerData.all},R=function(e){return e.playerData.selected},F=function(e){var t=N(e),n=R(e);return m()(t.filter((function(e){return e.name===n})),[0],null)},M=180/Math.PI,A=function(e){var t=e.player,n=e.nodePositionsMap,r=e.radius;if(!t)return a.a.createElement(a.a.Fragment,null);var i=t.alliance,c=t.outcomes,o=w[0].filter((function(e){return 0===e.id}))[0],l=P(c,i,o,0),s=[o].concat(Object(h.a)(l)).map((function(e){return function(e,t){return t[e.id]}(e,n)})).slice(0,c.length),u=1.2*r*Math.sin(2.4*M),d=1.2*r*Math.cos(2.4*M);return a.a.createElement(a.a.Fragment,null,s.map((function(e,t){var n=e.x,r=e.y;return a.a.createElement(D,{key:"indicator-".concat(t),x:n+u,y:r+d,outcome:c[t],alliance:i})})))},G=function(e){var t=Object(o.b)(),n=e.container,i=Object(o.c)((function(e){return e.nodeProperties.positions})),c=Object(o.c)(F),l=Object(r.useState)(0),s=Object(f.a)(l,2),u=s[0],d=s[1],m=Object(r.useState)(0),h=Object(f.a)(m,2),E=h[0],y=h[1],v=Object(r.useState)(0),g=Object(f.a)(v,2),k=g[0],b=g[1];Object(r.useEffect)((function(){var e=function(){return function(e,t,n,r){if(r.current){var a=r.current.clientWidth;e(a),t(1.223*a),n(a/23)}}(d,y,b,n)};return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]);var x=E/5,j=w[0],_=w.slice(1,5);return n.current?a.a.createElement(p.Stage,{width:u,height:E+100},a.a.createElement(O,{width:u,height:E}),a.a.createElement(p.Layer,null,c&&a.a.createElement(T,{player:c,nodePositionsMap:i})),a.a.createElement(p.Layer,null,a.a.createElement(W,{nodes:j,x:u/2,y:0,radius:k,dispatch:t}),_.map((function(e,n){return a.a.createElement(C,{key:"tier_".concat(n),nodes:e,x:u/2,y:x*(n+1),radius:k,width:u,height:x,dispatch:t})})),a.a.createElement(A,{player:c,nodePositionsMap:i,radius:k}))):a.a.createElement(a.a.Fragment,null)},B=n(98),X=(n(247),function(e){var t=e.players,n=(e.selected,Object(o.b)()),r=(Object(o.c)(F),Object(o.c)(R)),i=function(e){return e.map((function(e){return{value:e,label:e.name}}))}(t),c=m()(i.filter((function(e){return e.label===r})),[0],null);return a.a.createElement("div",{className:"player-selector"},a.a.createElement(B.a,{options:i,onChange:function(e){n({type:"SET_SELECTED_PLAYER",player:e.label})},value:c,isSearchable:!1}))}),Y=(n(248),function(e){var t=e.count;return a.a.createElement("div",{className:"omen-draw"},a.a.createElement("div",{className:"omen-draw__label"},"Omen Draws"),a.a.createElement("div",{className:"omen-draw__count"},t))}),I=(n(249),function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r,a,i,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new TextDecoder("utf8"),e.next=3,fetch(t);case 3:if((r=e.sent).ok){e.next=6;break}return e.abrupt("return",null);case 6:return a=r.body.getReader(),e.next=9,a.read();case 9:return i=e.sent,c=n.decode(i.value),e.abrupt("return",c);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),V=function(e){var t=e.split(","),n=t.slice(0,3),r=Object(f.a)(n,3),a=r[0],i=r[1],c=r[2],o=t.slice(3).map((function(e){return""===e||e.length<1?null:parseFloat(e)})).filter((function(e){return e>-1}));return{name:a,alliance:i===v?v:g,cards:parseFloat(c),outcomes:o}},z=function(e){var t=Object(o.b)(),n=Object(r.useRef)(null),i=Object(o.c)(N),c=Object(o.c)(R),l=Object(o.c)(F),d=m()(l,["cards"],0);return Object(r.useEffect)((function(){new Promise(function(){var e=Object(u.a)(s.a.mark((function e(n,r){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(){var e=Object(u.a)(s.a.mark((function e(t,n){var r,a,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I("https://docs.google.com/spreadsheets/d/e/2PACX-1vQtcua0U23LP0GMcFjvc6bF-0Y7paHNG8LWO4AqcMXkN0wH-rlnvQ5xtAo_GV_yGBdSMOAWYDXJK0BF/pub?output=csv");case 2:null===(r=e.sent)&&t([]),a=r.split("\n").slice(1),i=a.map(V),console.log(i),t(i);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 2:a=e.sent,t(j(a)),n();case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}),[]),a.a.createElement("div",{className:"tracker-container"},a.a.createElement("div",{className:"player-selection-container"},a.a.createElement("div",null,i&&a.a.createElement(X,{players:i,selected:c})),a.a.createElement("div",null,l&&a.a.createElement(Y,{count:d}))),a.a.createElement("div",{className:"tracker-container__campaign",ref:n},a.a.createElement(G,{container:n})))},H=(n(266),function(e){var t=Object(r.useRef)();return a.a.createElement("div",{className:"App",ref:t},a.a.createElement("header",{className:"App-header"}),a.a.createElement(z,null))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var J=n(22),U=n(1),Q=n(30),q=n.n(Q),K={nodeProperties:{positions:{}},playerData:{selected:null,all:[]}},$=function(e,t){var n={x:t.x,y:t.y,id:t.id},r=e.positions,a=q()({},r,Object(U.a)({},t.id,n));return q()({},e,{positions:a})},Z=function(e,t){var n=t.players;return q()({},e,{all:n})},ee=function(e,t){var n=t.player;return q()({},e,{selected:n})},te=Object(J.b)({nodeProperties:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K.nodeProperties,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NODE":return $(e,t);default:return e}},playerData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K.playerData,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SELECTED_PLAYER":return ee(e,t);case"SET_PLAYERS":return Z(e,t);default:return e}}}),ne=Object(J.c)(te,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());n(269);c.a.render(a.a.createElement(o.a,{store:ne},a.a.createElement(H,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},99:function(e,t,n){e.exports=n(270)}},[[99,1,2]]]);
//# sourceMappingURL=main.a4cf5523.chunk.js.map